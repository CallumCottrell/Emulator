;
; Interrupt driven input/output example
; Input on device 1 and output on device 2
; L. Hughes
;
;  7 July 2018 - LR pushed/pulled before calls to queuing routines in ISRs
; 20 June 2018
;
; Equates
;
; Registers:
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; PSW priorities and sleep bits
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Status/control bits
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; DBA bit

лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; IE bit

;
; Queue structure constants
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Position in IOQueue

лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Position in IOQueue

лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Position in IOQueue

;
; Booleans
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; ***** Device memory
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; ***** Common memory (global)
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; 0: Queue[0..4]

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; 4: Head (0..3)

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; 5: Tail (0..3)

;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; 

;
; ***** Mainline
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Block all interrupts - by rights, CPU should start with priority 7
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Initialize stack pointer
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Initialize devices
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Enter sleep loop at priority 3
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Sleep

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; ***** Support routines
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; 
; Device initialization code
; Assumes priority 7
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Clear any pending input byte

;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 refers to IOQueue

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; IOQueue.Head = 1

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; IOQueue.Tail = 0

; 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 refers to OutBusy

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; OutBusy = FALSE

;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Return

;
; ***** Queue software
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Enqueue data
; R3 is data to enqueue
; R0 is queue structure
; Return -1 in R3 if queue full; otherwise R3 unchanged
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; R1, R2 are volatile - save
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Initialize R1 (head) and R2 (tail)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Check for full queue (head=tail)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Store R3 in queue[head]
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 to be modified, stack 

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 is address of queue element

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; queue[head] = data

; Increment and mask head
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R1 = 001, 010, 011, 100

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R1 = 001, 010, 011, 000

; Save new head
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 restored

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; IOQueue.Head = updated head

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Queue is full
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Signal queue full

;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Restore volatile registers
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; return

;
; Dequeue data
; R0 is queue structure
; Return result in R1
; If queue is empty, return -1 in R1
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; R2 is volatile - save
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Initialize R1 (head) and R2 (tail)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Increment and mask tail
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R2 = 001, 010, 011, 100

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R2 = 001, 010, 011, 000

; Check for empty queue ((tail + 1) = head)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Queue not empty - R1 = queue[tail]
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 to be modified, stack 

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 is address of queue element

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; queue[head] = data

; Save new tail
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 restored

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; IOQueue.Tail = updated tail

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Restore volatile register
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; return

;
; ***** Interrupt service routines
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Device 1 ISR:
; Character arrived on device 1 
; Read character to clear DBA
; If output busy, enqueue, otherwise write to output
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Save volatile registers
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;  R1 refers to Dev1
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Read input register - will clear DBA and Dev1's interrupt
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R3 = Dev1In

; Check if Device 2 is busy with output
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 = OutBusy

;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Result = R0 - TRUE

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Dev2 is busy with output

; 
; Output is idle - must force output
; Output must change to busy
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; OutBusy = TRUE

; Write data to Dev2Out
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Dev2Out = data
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Output should start

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Output is busy - queue character
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Queue char in R3
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 refers to IOQueue

; enq(data)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Save LR

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Ignore queue overflow

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Restore LR

; Restore volatile registers
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Device 2 ISR
; Character has been sent on device 2
; Check queue for character
; If it exists, continue sending (OutBusy is still TRUE)
; If nothing, set OutBusy to FALSE
;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Save volatile registers
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Check queue
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R0 refers to IOQueue

; deq(data)
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Save LR

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; R3 = -1 if empty

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Restore LR

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Result = R3 - (-1)

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Write R3 to Dev2Out
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Dev2Out = data
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Output should start

ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Nothing left to send, OutBusy is FALSE
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; OutBusy = FALSE

;
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
; Restore volatile registers
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ; Return

;
; ***** High memory - vector addresses
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Device 1's vector
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Device 2's vector
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
; Startup/reset vector - ensures PSW.PRI is 7
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} лллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
;
ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} ллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллллл╟Р} 
